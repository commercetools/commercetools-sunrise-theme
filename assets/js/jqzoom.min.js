!function(a){a.fn.zoom=function(b){function c(b){e.find(".bzoom_thumb_active").removeClass("bzoom_thumb_active").stop().animate({opacity:0},d.speed,function(){a(this).hide()}),s.find(".bzoom_smallthumb_active").removeClass("bzoom_smallthumb_active").stop().animate({opacity:d.smallthumb_inactive_opacity},d.speed),f.eq(b).addClass("bzoom_thumb_active").show().stop().css({opacity:0}).animate({opacity:1},d.speed),s.find("li:eq("+b+")").addClass("bzoom_smallthumb_active").show().stop().css({opacity:d.smallthumb_inactive_opacity}).animate({opacity:1},d.speed),j.attr("src",f.eq(b).find(".bzoom_thumb_image").attr("src"))}var d={align:"left",thumb_image_width:300,thumb_image_height:400,source_image_width:900,source_image_height:1200,zoom_area_width:600,zoom_area_height:"justify",zoom_area_distance:10,zoom_easing:!0,click_to_zoom:!1,zoom_element:"auto",show_descriptions:!0,description_location:"bottom",description_opacity:.7,small_thumbs:3,smallthumb_inactive_opacity:.4,smallthumb_hide_single:!0,smallthumb_select_on_hover:!1,smallthumbs_position:"bottom",show_icon:!0,hide_cursor:!1,speed:600,autoplay:!0,autoplay_interval:6e3,keyboard:!0,right_to_left:!1};b&&a.extend(d,b);var e=a(this);if(e.is("ul")&&e.children("li").length&&e.find(".bzoom_big_image").length){e.addClass("bzoom clearfix").show();var f=e.children("li").addClass("bzoom_thumb"),g=f.length,h=d.autoplay;f.first().addClass("bzoom_thumb_active").show(),2>g&&(h=!1),e.find(".bzoom_thumb_image").css({width:d.thumb_image_width,height:d.thumb_image_height}).show();var i,j,k,l,m=d.thumb_image_width/d.source_image_width,n=d.thumb_image_height/d.source_image_height,o=d.thumb_image_width/d.thumb_image_height;if(e.find(".bzoom_magnifier").length||(i=a('<li class="bzoom_magnifier"><div class=""><img src="" /></div></li>'),j=i.find("img"),e.append(i),i.css({top:p,left:q}),j.attr("src",e.find(".bzoom_thumb_active .bzoom_thumb_image").attr("src")).css({width:d.thumb_image_width,height:d.thumb_image_height}),i.find("div").css({width:d.thumb_image_width*m,height:d.thumb_image_height*n})),!e.find(".bzoom_zoom_area").length){k=a('<li class="bzoom_zoom_area"><div><img class="bzoom_zoom_img" /></div></li>'),l=k.find(".bzoom_zoom_img");var p=0,q=0;e.append(k),"left"==d.align&&(p=0,q=0+d.thumb_image_width+d.zoom_area_distance),k.css({top:p,left:q}),l.css({width:d.source_image_width,height:d.source_image_height})}var r={autotime:null,isplay:h,start:function(){this.isplay&&!this.autotime&&(this.autotime=setInterval(function(){var a=e.find(".bzoom_thumb_active").index();c((a+1)%d.small_thumbs)},d.autoplay_interval))},stop:function(){clearInterval(this.autotime),this.autotime=null},restart:function(){this.stop(),this.start()}},s="";if(!e.find(".bzoom_small_thumbs").length){for(var p=d.thumb_image_height+10,t=d.thumb_image_width,u=d.thumb_image_width/d.small_thumbs-10,v=u/o,w=(smurl="",""),x=0;x<d.small_thumbs;x++)smurl=f.eq(x).find(".bzoom_thumb_image").attr("src"),w+=0==x?'<li class="bzoom_smallthumb_active"><img src="'+smurl+'" alt="small" style="width:'+u+"px; height:"+v+'px;" /></li>':'<li style="opacity:0.4;"><img src="'+smurl+'" alt="small" style="width:'+u+"px; height:"+v+'px;" /></li>';s=a('<li class="bzoom_small_thumbs" style="top:'+p+"px; width:"+t+'px;"><ul class="clearfix" style="width: 485px;">'+w+"</ul></li>"),e.append(s),s.delegate("li","click",function(b){c(a(this).index()),r.restart()}),r.start()}d.zoom_area_height=d.zoom_area_width/o,k.find("div").css({width:d.zoom_area_width,height:d.zoom_area_height}),f.add(i).mousemove(function(a){var b=a.pageX-e.offset().left,c=a.pageY-e.offset().top,f=d.thumb_image_width*m,g=d.thumb_image_height*m,h=0,k=0,o=0,p=0;h=b<d.thumb_image_width/2?b>f/2?b-f/2:0:b+f/2>d.thumb_image_width?d.thumb_image_width-f:b-f/2,k=c<d.thumb_image_height/2?c>g/2?c-g/2:0:c+g/2>d.thumb_image_height?d.thumb_image_height-g:c-g/2,o=h/m,p=k/n,i.css({left:h,top:k}),j.css({left:-h,top:-k}),l.css({left:-o,top:-p})}).mouseenter(function(b){r.stop(),l.attr("src",a(this).find(".bzoom_big_image").attr("src")),k.css({"background-image":"none"}).stop().fadeIn(400),e.find(".bzoom_thumb_active").stop().animate({opacity:.5},.7*d.speed),i.stop().animate({opacity:1},.7*d.speed).show()}).mouseleave(function(b){k.stop().fadeOut(400),e.find(".bzoom_thumb_active").stop().animate({opacity:1},.7*d.speed),i.stop().animate({opacity:0},.7*d.speed,function(){a(this).hide()}),r.start()})}}}(jQuery);